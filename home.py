import streamlit as st
import joblib
import pandas as pd

def main():

    lr_model = joblib.load('./models/lr_model.pkl')
    
    oem_model = [
        ('Audi','Audi A3'),
        ('Audi','Audi A3 cabriolet'),
        ('Audi','Audi A4'),
        ('Audi','Audi A6'),
        ('Audi','Audi A8'),
        ('Audi','Audi Q2'),
        ('Audi','Audi Q3'),
        ('Audi','Audi Q3 Sportback'),
        ('Audi','Audi Q5'),
        ('Audi','Audi Q7'),
        ('Audi','Audi S5 Sportback'),
        ('BMW','BMW 1 Series'),
        ('BMW','BMW 2 Series'),
        ('BMW','BMW 3 Series'),
        ('BMW','BMW 3 Series Gran Limousine'),
        ('BMW','BMW 3 Series GT'),
        ('BMW','BMW 5 Series'),
        ('BMW','BMW 6 Series'),
        ('BMW','BMW 7 Series'),
        ('BMW','BMW X1'),
        ('BMW','BMW X3'),
        ('BMW','BMW X4'),
        ('BMW','BMW X5'),
        ('BMW','BMW X7'),
        ('Chevrolet','Chevrolet Aveo'),
        ('Chevrolet','Chevrolet Aveo U-VA'),
        ('Chevrolet','Chevrolet Beat'),
        ('Chevrolet','Chevrolet Captiva'),
        ('Chevrolet','Chevrolet Cruze'),
        ('Chevrolet','Chevrolet Enjoy'),
        ('Chevrolet','Chevrolet Optra'),
        ('Chevrolet','Chevrolet Sail'),
        ('Chevrolet','Chevrolet Spark'),
        ('Chevrolet','Chevrolet Tavera'),
        ('Citroen','Citroen C3'),
        ('Citroen','Citroen C5 Aircross'),
        ('Datsun','Datsun GO'),
        ('Datsun','Datsun GO Plus'),
        ('Datsun','Datsun RediGO'),
        ('Fiat','Fiat Abarth Avventura'),
        ('Fiat','Fiat Avventura'),
        ('Fiat','Fiat Grande Punto'),
        ('Fiat','Fiat Linea'),
        ('Fiat','Fiat Palio'),
        ('Fiat','Fiat Punto'),
        ('Fiat','Fiat Punto Abarth'),
        ('Fiat','Fiat Punto EVO'),
        ('Fiat','Fiat Punto Pure'),
        ('Ford','Ford Aspire'),
        ('Ford','Ford Ecosport'),
        ('Ford','Ford Endeavour'),
        ('Ford','Ford Fiesta'),
        ('Ford','Ford Fiesta Classic'),
        ('Ford','Ford Figo'),
        ('Ford','Ford Freestyle'),
        ('Ford','Ford Ikon'),
        ('Ford','Ford Mondeo'),
        ('Hindustan Motors','Ambassador'),
        ('Hindustan Motors','Hindustan Motors Contessa'),
        ('Honda','Honda Amaze'),
        ('Honda','Honda Brio'),
        ('Honda','Honda BR-V'),
        ('Honda','Honda City'),
        ('Honda','Honda City Hybrid'),
        ('Honda','Honda Civic'),
        ('Honda','Honda CR-V'),
        ('Honda','Honda Jazz'),
        ('Honda','Honda Mobilio'),
        ('Honda','Honda New Accord'),
        ('Honda','Honda WR-V'),
        ('Hyundai','Hyundai Accent'),
        ('Hyundai','Hyundai Alcazar'),
        ('Hyundai','Hyundai Aura'),
        ('Hyundai','Hyundai Creta'),
        ('Hyundai','Hyundai Elantra'),
        ('Hyundai','Hyundai EON'),
        ('Hyundai','Hyundai Getz'),
        ('Hyundai','Hyundai Grand i10'),
        ('Hyundai','Hyundai Grand i10 Nios'),
        ('Hyundai','Hyundai i10'),
        ('Hyundai','Hyundai i20'),
        ('Hyundai','Hyundai i20 Active'),
        ('Hyundai','Hyundai i20 N Line'),
        ('Hyundai','Hyundai Kona'),
        ('Hyundai','Hyundai Santa Fe'),
        ('Hyundai','Hyundai Santro'),
        ('Hyundai','Hyundai Santro Xing'),
        ('Hyundai','Hyundai Sonata'),
        ('Hyundai','Hyundai Tucson'),
        ('Hyundai','Hyundai Venue'),
        ('Hyundai','Hyundai Verna'),
        ('Hyundai','Hyundai Xcent'),
        ('Hyundai','Hyundai Xcent Prime'),
        ('Isuzu','Isuzu D-Max'),
        ('Isuzu','Isuzu MU 7'),
        ('Isuzu','Isuzu MU-X'),
        ('Jaguar','Jaguar F-Pace'),
        ('Jaguar','Jaguar F-TYPE'),
        ('Jaguar','Jaguar XE'),
        ('Jaguar','Jaguar XF'),
        ('Jaguar','Jaguar XJ'),
        ('Jeep','Jeep Compass'),
        ('Jeep','Jeep Compass Trailhawk'),
        ('Jeep','Jeep Meridian'),
        ('Jeep','Jeep Wrangler'),
        ('Kia','Kia Carens'),
        ('Kia','Kia Carnival'),
        ('Kia','Kia Seltos'),
        ('Kia','Kia Sonet'),
        ('Land Rover','Land Rover Defender'),
        ('Land Rover','Land Rover Discovery'),
        ('Land Rover','Land Rover Discovery Sport'),
        ('Land Rover','Land Rover Freelander 2'),
        ('Land Rover','Land Rover Range Rover'),
        ('Land Rover','Land Rover Range Rover Evoque'),
        ('Land Rover','Land Rover Range Rover Sport'),
        ('Land Rover','Land Rover Range Rover Velar'),
        ('Lexus','Lexus ES'),
        ('Lexus','Lexus RX'),
        ('Mahindra Renault','Mahindra Renault Logan'),
        ('Mahindra Ssangyong','Mahindra Ssangyong Rexton'),
        ('Mahindra','Mahindra Alturas G4'),
        ('Mahindra','Mahindra Bolero'),
        ('Mahindra','Mahindra Bolero Camper'),
        ('Mahindra','Mahindra Bolero Neo'),
        ('Mahindra','Mahindra Bolero Pik Up Extra Long'),
        ('Mahindra','Mahindra Bolero Power Plus'),
        ('Mahindra','Mahindra E Verito'),
        ('Mahindra','Mahindra e2o Plus'),
        ('Mahindra','Mahindra Jeep'),
        ('Mahindra','Mahindra KUV 100'),
        ('Mahindra','Mahindra KUV 100 NXT'),
        ('Mahindra','Mahindra Marazzo'),
        ('Mahindra','Mahindra Quanto'),
        ('Mahindra','Mahindra Scorpio'),
        ('Mahindra','Mahindra Scorpio Classic'),
        ('Mahindra','Mahindra Scorpio N'),
        ('Mahindra','Mahindra Thar'),
        ('Mahindra','Mahindra TUV 300'),
        ('Mahindra','Mahindra TUV 300 Plus'),
        ('Mahindra','Mahindra Verito'),
        ('Mahindra','Mahindra XUV300'),
        ('Mahindra','Mahindra XUV500'),
        ('Mahindra','Mahindra XUV700'),
        ('Mahindra','Mahindra Xylo'),
        ('Maruti','Maruti 1000'),
        ('Maruti','Maruti 800'),
        ('Maruti','Maruti Alto'),
        ('Maruti','Maruti Alto 800'),
        ('Maruti','Maruti Alto K10'),
        ('Maruti','Maruti A-Star'),
        ('Maruti','Maruti Baleno'),
        ('Maruti','Maruti Baleno RS'),
        ('Maruti','Maruti Brezza'),
        ('Maruti','Maruti Celerio'),
        ('Maruti','Maruti Celerio Tour 2018-2021'),
        ('Maruti','Maruti Celerio X'),
        ('Maruti','Maruti Ciaz'),
        ('Maruti','Maruti Eeco'),
        ('Maruti','Maruti Ertiga'),
        ('Maruti','Maruti Ertiga Tour'),
        ('Maruti','Maruti Esteem'),
        ('Maruti','Maruti Estilo'),
        ('Maruti','Maruti FRONX'),
        ('Maruti','Maruti Grand Vitara'),
        ('Maruti','Maruti Gypsy'),
        ('Maruti','Maruti Ignis'),
        ('Maruti','Maruti Jimny'),
        ('Maruti','Maruti Omni'),
        ('Maruti','Maruti Ritz'),
        ('Maruti','Maruti S-Presso'),
        ('Maruti','Maruti Swift'),
        ('Maruti','Maruti Swift Dzire'),
        ('Maruti','Maruti Swift Dzire Tour'),
        ('Maruti','Maruti SX4'),
        ('Maruti','Maruti SX4 S Cross'),
        ('Maruti','Maruti Versa'),
        ('Maruti','Maruti Vitara Brezza'),
        ('Maruti','Maruti Wagon R'),
        ('Maruti','Maruti Wagon R Stingray'),
        ('Maruti','Maruti XL6'),
        ('Maruti','Maruti Zen'),
        ('Maruti','Maruti Zen Estilo'),
        ('Mercedes-Benz','Mercedes-Benz A Class'),
        ('Mercedes-Benz','Mercedes-Benz A-Class Limousine'),
        ('Mercedes-Benz','Mercedes-Benz AMG A 35'),
        ('Mercedes-Benz','Mercedes-Benz AMG G 63'),
        ('Mercedes-Benz','Mercedes-Benz AMG GLA 35'),
        ('Mercedes-Benz','Mercedes-Benz AMG GLC 43'),
        ('Mercedes-Benz','Mercedes-Benz AMG GT'),
        ('Mercedes-Benz','Mercedes-Benz B Class'),
        ('Mercedes-Benz','Mercedes-Benz C-Class'),
        ('Mercedes-Benz','Mercedes-Benz CLA'),
        ('Mercedes-Benz','Mercedes-Benz CLS-Class'),
        ('Mercedes-Benz','Mercedes-Benz E-Class'),
        ('Mercedes-Benz','Mercedes-Benz EQC'),
        ('Mercedes-Benz','Mercedes-Benz G'),
        ('Mercedes-Benz','Mercedes-Benz GLA'),
        ('Mercedes-Benz','Mercedes-Benz GLA Class'),
        ('Mercedes-Benz','Mercedes-Benz GLC'),
        ('Mercedes-Benz','Mercedes-Benz GLC Coupe'),
        ('Mercedes-Benz','Mercedes-Benz GL-Class'),
        ('Mercedes-Benz','Mercedes-Benz GLE'),
        ('Mercedes-Benz','Mercedes-Benz GLS'),
        ('Mercedes-Benz','Mercedes-Benz M-Class'),
        ('Mercedes-Benz','Mercedes-Benz S-Class'),
        ('Mercedes-Benz','Mercedes-Benz SLC'),
        ('MG','MG Astor'),
        ('MG','MG Comet EV'),
        ('MG','MG Gloster'),
        ('MG','MG Hector'),
        ('MG','MG Hector Plus'),
        ('MG','MG ZS EV'),
        ('Mini','Mini 3 DOOR'),
        ('Mini','Mini 5 DOOR'),
        ('Mini','Mini Cooper'),
        ('Mini','Mini Cooper Clubman'),
        ('Mini','Mini Cooper Convertible'),
        ('Mini','Mini Cooper Countryman'),
        ('Mini','Mini Cooper SE'),
        ('Mitsubishi','Mitsubishi Cedia'),
        ('Mitsubishi','Mitsubishi Lancer'),
        ('Mitsubishi','Mitsubishi Outlander'),
        ('Mitsubishi','Mitsubishi Pajero'),
        ('Nissan','Nissan Kicks'),
        ('Nissan','Nissan Magnite'),
        ('Nissan','Nissan Micra'),
        ('Nissan','Nissan Micra Active'),
        ('Nissan','Nissan Sunny'),
        ('Nissan','Nissan Terrano'),
        ('Opel','OpelCorsa'),
        ('Porsche','Porsche 911'),
        ('Porsche','Porsche Cayenne'),
        ('Porsche','Porsche Macan'),
        ('Porsche','Porsche Panamera'),
        ('Renault','Renault Captur'),
        ('Renault','Renault Duster'),
        ('Renault','Renault Fluence'),
        ('Renault','Renault Kiger'),
        ('Renault','Renault KWID'),
        ('Renault','Renault Lodgy'),
        ('Renault','Renault Pulse'),
        ('Renault','Renault Scala'),
        ('Renault','Renault Triber'),
        ('Skoda','Skoda Fabia'),
        ('Skoda','Skoda Kodiaq'),
        ('Skoda','Skoda Kushaq'),
        ('Skoda','Skoda Laura'),
        ('Skoda','Skoda Octavia'),
        ('Skoda','Skoda Rapid'),
        ('Skoda','Skoda Slavia'),
        ('Skoda','Skoda Superb'),
        ('Skoda','Skoda Yeti'),
        ('Tata','Tata Altroz'),
        ('Tata','Tata Aria'),
        ('Tata','Tata Bolt'),
        ('Tata','Tata Harrier'),
        ('Tata','Tata Hexa'),
        ('Tata','Tata Indica'),
        ('Tata','Tata Indica V2'),
        ('Tata','Tata Indigo'),
        ('Tata','Tata Indigo Marina'),
        ('Tata','Tata Manza'),
        ('Tata','Tata Nano'),
        ('Tata','Tata New Safari'),
        ('Tata','Tata Nexon'),
        ('Tata','Tata Nexon EV'),
        ('Tata','Tata Nexon EV Max'),
        ('Tata','Tata Nexon EV Prime'),
        ('Tata','Tata Punch'),
        ('Tata','Tata Safari Storme'),
        ('Tata','Tata Sumo'),
        ('Tata','Tata Sumo Victa'),
        ('Tata','Tata Tiago'),
        ('Tata','Tata Tiago NRG'),
        ('Tata','Tata Tigor'),
        ('Tata','Tata Tigor EV'),
        ('Tata','Tata Yodha Pickup'),
        ('Tata','Tata Zest'),
        ('Toyota','Toyota Camry'),
        ('Toyota','Toyota Corolla'),
        ('Toyota','Toyota Corolla Altis'),
        ('Toyota','Toyota Etios'),
        ('Toyota','Toyota Etios Cross'),
        ('Toyota','Toyota Etios Liva'),
        ('Toyota','Toyota Fortuner'),
        ('Toyota','Toyota Fortuner Legender'),
        ('Toyota','Toyota Glanza'),
        ('Toyota','Toyota Hyryder'),
        ('Toyota','Toyota Innova'),
        ('Toyota','Toyota Innova Crysta'),
        ('Toyota','Toyota Land Cruiser 300'),
        ('Toyota','Toyota Qualis'),
        ('Toyota','Toyota Urban cruiser'),
        ('Toyota','Toyota Vellfire'),
        ('Toyota','Toyota Yaris'),
        ('Volkswagen','Volkswagen Ameo'),
        ('Volkswagen','Volkswagen CrossPolo'),
        ('Volkswagen','Volkswagen Jetta'),
        ('Volkswagen','Volkswagen Passat'),
        ('Volkswagen','Volkswagen Polo'),
        ('Volkswagen','Volkswagen Taigun'),
        ('Volkswagen','Volkswagen Tiguan'),
        ('Volkswagen','Volkswagen Tiguan Allspace'),
        ('Volkswagen','Volkswagen T-Roc'),
        ('Volkswagen','Volkswagen Vento'),
        ('Volkswagen','Volkswagen Virtus'),
        ('Volvo','Volvo S 80'),
        ('Volvo','Volvo S60'),
        ('Volvo','Volvo S60 Cross Country'),
        ('Volvo','Volvo S90'),
        ('Volvo','Volvo V40'),
        ('Volvo','Volvo XC 90'),
        ('Volvo','Volvo XC40'),
        ('Volvo','Volvo XC60')
    ]
    
    oems = {key for key, _ in oem_model}
   
    owner_no = st.number_input('Owner', step=1, value=1, format="%d")
    model_year = st.number_input('Model Year', step=1, value=2010, format="%d")
    mileage = st.number_input('Mileage', step=0.1, value=15.0, format="%0.1f")
    o_Kms = st.number_input('Kms Driven', value=20000.0, format="%0.1f", step=100.0)
    transmission = st.selectbox('Transmission', ('manual','automatic'))
    city = st.selectbox('City',('bangalore','chennai','delhi','hyderabad','jaipur','kolkata'))
    ft = st.selectbox('Fuel Type',('Diesel','Petrol'))
    oem = st.selectbox('Brand', oems)
    model = st.selectbox('Model', [model1 for oem1, model1 in oem_model if oem1 == oem])
    
    if (st.button("Predict")):
        new_data = {
            'ownerNo': owner_no,
            'modelYear': model_year,
            'mileage': mileage,
            'o_Kms': o_Kms,
            'transmission': transmission,
            'city': city,
            'ft': ft,
            'oem': oem,
            'model': model
        }
        st.write(lr_model.predict(pd.DataFrame().from_dict([new_data])))

if __name__ == "__main__":
    main()